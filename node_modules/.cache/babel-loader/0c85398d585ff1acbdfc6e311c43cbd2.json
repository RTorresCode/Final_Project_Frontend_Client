{"ast":null,"code":"var _jsxFileName = \"/Users/tahminamunni/Desktop/Final_Project_Frontend_Client/src/components/containers/EditStudentContainer.js\";\nimport Header from './Header';\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport EditStudentView from '../views/EditStudentView';\nimport { editStudentThunk } from '../../store/thunks';\nimport { fetchStudentThunk } from \"../../store/thunks\";\nimport { fetchAllCampusesThunk } from \"../../store/thunks\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass EditStudentContainer extends Component {\n  componentDidMount() {\n    //getting student ID from url\n    this.props.fetchStudent(this.props.match.params.id);\n    this.props.fetchAllCampuses();\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      const {\n        name,\n        value,\n        type,\n        checked\n      } = event.target;\n      type === \"checkbox\" ? this.setState({\n        [name]: checked\n      }) : this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleSubmit = async event => {\n      event.preventDefault();\n      let new_info = {\n        firstname: this.state.firstname,\n        lastname: this.state.lastname,\n        gpa: this.state.gpa,\n        email: this.state.email,\n        imageUrl: this.state.imageUrl,\n        campusId: this.state.campusId,\n        id: this.state.id\n      };\n\n      if (new_info.imageUrl === \"\") {}\n\n      try {\n        let student = await this.props.editStudent(new_info);\n        console.log(student.id);\n        alert(`${new_info.firstname} ${new_info.lastname}'s edit was saved.`);\n        this.setState({\n          firstname: \"\",\n          lastname: \"\",\n          gpa: -1,\n          email: \"\",\n          imageUrl: \"\",\n          id: -1,\n          campusId: -1,\n          redirect: true\n        });\n      } catch (err) {\n        console.error(err);\n        alert(\"Error with edit!\");\n        this.setState({\n          errorCaught: true\n        });\n      }\n\n      ;\n    };\n\n    let _student = this.props.student;\n    this.state = {\n      student: _student,\n      firstname: _student.firstname,\n      lastname: _student.lastname,\n      campusId: _student.campusId,\n      imageURL: _student.imageURL,\n      gpa: _student.gpa,\n      email: _student.email,\n      studentId: _student.id,\n      redirect: false\n    };\n  }\n\n  componentWillUnmount() {\n    this.setState({\n      redirect: false,\n      redirectId: null\n    });\n  }\n\n  render() {\n    if (this.state.redirect) {\n      window.location.reload();\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(EditStudentView, {\n        handleChange: this.handleChange,\n        handleSubmit: this.handleSubmit,\n        student: this.props.student\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this), this.state.errorCaught ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Student First and Last names: Cannot be null.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Student's Campus ID: Must be a valid  and actual campus ID of a school within this database.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Student Email: Cannot be null.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Student Image: Can be left blank.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Student GPA: Must be between 0.0 and 4.0.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nconst mapDispatch = dispatch => {\n  return {\n    editStudent: student => dispatch(editStudentThunk(student))\n  };\n};\n\nexport default connect(null, mapDispatch)(EditStudentContainer);","map":{"version":3,"sources":["/Users/tahminamunni/Desktop/Final_Project_Frontend_Client/src/components/containers/EditStudentContainer.js"],"names":["Header","Component","connect","Redirect","EditStudentView","editStudentThunk","fetchStudentThunk","fetchAllCampusesThunk","EditStudentContainer","componentDidMount","props","fetchStudent","match","params","id","fetchAllCampuses","constructor","handleChange","event","name","value","type","checked","target","setState","handleSubmit","preventDefault","new_info","firstname","state","lastname","gpa","email","imageUrl","campusId","student","editStudent","console","log","alert","redirect","err","error","errorCaught","imageURL","studentId","componentWillUnmount","redirectId","render","window","location","reload","mapDispatch","dispatch"],"mappings":"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","sourcesContent":["import Header from './Header';\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport EditStudentView from '../views/EditStudentView';\nimport { editStudentThunk } from '../../store/thunks';\nimport { fetchStudentThunk } from \"../../store/thunks\";\nimport { fetchAllCampusesThunk } from \"../../store/thunks\";\n\n\nclass EditStudentContainer extends Component {\n  componentDidMount() {\n    //getting student ID from url\n    this.props.fetchStudent(this.props.match.params.id);\n    this.props.fetchAllCampuses();\n  }\n\n  constructor(props){\n    super(props);\n    \n    let student = this.props.student\n\n    this.state = {\n      student: student,\n      firstname: student.firstname,\n      lastname: student.lastname,\n      campusId: student.campusId,\n      imageURL: student.imageURL,\n      gpa: student.gpa,\n      email: student.email,\n      studentId: student.id, \n      redirect: false\n    };\n  }\n    \n\n    \n\n    handleChange = event => {\n      const {name, value, type, checked} = event.target\n      type === \"checkbox\" ? this.setState({ [name]: checked }) : this.setState({ [name]: value })\n    }\n    handleSubmit = async event =>  {\n      event.preventDefault(); \n  \n      let new_info = { \n        firstname: this.state.firstname,\n        lastname: this.state.lastname,\n        gpa: this.state.gpa,\n        email: this.state.email,\n        imageUrl: this.state.imageUrl,\n        campusId: this.state.campusId,\n        id: this.state.id\n      };\n      if (new_info.imageUrl === \"\") { \n      }\n  \n      \n        try {\n          let student = await this.props.editStudent(new_info) \n          console.log(student.id); \n          alert(`${new_info.firstname} ${new_info.lastname}'s edit was saved.`); \n      \n          this.setState({\n            firstname: \"\", \n            lastname: \"\",\n            gpa: -1,\n            email: \"\",\n            imageUrl: \"\",\n            id: -1,\n            campusId: -1,\n            redirect: true, \n          });\n        }\n        catch(err) { \n          console.error(err); \n          alert(\"Error with edit!\");\n          this.setState({\n            errorCaught: true \n          });\n        };\n    }\n    \n    componentWillUnmount() {\n      this.setState({redirect: false, redirectId: null});\n    }\n    \n    render() {\n      if(this.state.redirect) {\n        window.location.reload(); \n      }\n  \n     return (\n        <div>\n          <EditStudentView\n            handleChange = {this.handleChange} \n            handleSubmit={this.handleSubmit}\n            student={this.props.student}\n          />\n          {this.state.errorCaught ? (\n            <div>\n              <br />\n              <p>Student First and Last names: Cannot be null.</p>\n              <p>Student's Campus ID: Must be a valid  and actual campus ID of a school within this database.</p>\n              <p>Student Email: Cannot be null.</p>\n              <p>Student Image: Can be left blank.</p>\n              <p>Student GPA: Must be between 0.0 and 4.0.</p>\n            </div>\n          ) : (\n            null\n          )}\n        </div>          \n      );\n    }\n  }\n  \n const mapDispatch = (dispatch) => {\n      return({\n          editStudent: (student) => dispatch(editStudentThunk(student)),\n      })\n  }\n  \n  export default connect(null, mapDispatch)(EditStudentContainer);\n\n\n\n\n\n\n\n\n\n\n\n  "]},"metadata":{},"sourceType":"module"}